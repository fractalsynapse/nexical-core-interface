{% load static %}

<div class="summarize-form container">
  <div id="summary-container" class="summary-empty">
    <img class="summary-loading" src="{% static 'images/loading.gif' %}" alt="Loading..." />
    <div class="summary-loading summary-time">
      <h4>Researching...</h4>
      <br />
      <b><i>Depending on the volume of information this might take a few minutes</i></b>
      <br />
      <br />
      It is safe to navigate away from this page
    </div>
    <div class="row">
      <div class="col-11">
        <div class="summary-text"></div>
        <div class="summary-references"></div>
      </div>
      <div class="col-1">
        <a id="summary-expand" href="#" class="expand-link text-decoration-none" title="Expand">
          <i class="bx bx-expand"></i>
        </a>
        <a id="summary-shrink" href="#" class="expand-link text-decoration-none" title="Shrink">
          <i class="bx bx-exit-fullscreen"></i>
        </a>
      </div>
    </div>
  </div>
  <form id="summary-form" class="form-horizontal">
    <div class="summary-form-fields">
      <div class="row">
        <div class="col-9 summary-prompt-label-wrapper mb-3">
          <b>Ask a question or type an instruction:</b>
          <br />
          <i>The more detail the better</i>
        </div>
        <div class="col-3 summary-name-wrapper d-flex justify-content-end">
          <button type="button" id="summary-name-toggle-button" class="btn btn-light px-5 summary-name-button">Name</button>
        </div>
      </div>
      <input type="text" id="summary-name" class="form-control" minlength="4" maxlength="250" placeholder="Name" />
      <textarea autofocus required id="summary-prompt"></textarea>
      <div class="form-help-text">
        <p>To format a good AI prompt that provides accurate and helpful answers, follow these guidelines:</p>
        <ul>
          <li>Ask specific and unambiguous questions, focusing on one topic at a time.</li>
          <li>Provide necessary context and background information, but avoid overwhelming details.</li>
          <li>Ensure that the prompt is grammatically correct and concise.</li>
        </ul>
      </div>
      <label for="summary-tags">
        <b>Tags:</b>
      </label>
      <select id="summary-tags" class="form-control" multiple="multiple">
        {% for tag in tags %}<option value="{{ tag.name }}">{{ tag.name }}</option>{% endfor %}
      </select>
      <div class="form-help-text">
        <p>If you want to update tags later, just press the summarize button with the same prompt and different tags</p>
      </div>
    </div>
    <div class="control-group">
      <div class="controls">
        <button type="button" id="summary-summarize-form-button" class="btn btn-primary px-5">Summarize</button>
        <button type="button" id="summary-reset-form-button" class="btn btn-primary px-5">Reset Form</button>
      </div>
    </div>
    <input type="hidden" id="summary-id" value="" />
    <input type="hidden" id="summary-save-url" value="{% url 'research:save_summary' %}" />
  </form>
  <div class="summary-notice">
    AI generated summarization may at times generate inaccurate information.
    To mitigate this risk we run multiple AI systems and the document ranking produced can be used to reference the internal documents and materials used.
    If your requests are generic the AI system might base it's response on an incorrrect understanding of what you want to understand.
    We recommend reframing or adding more detail to your query in these cases, which will aid in search and summarization.
  </div>
</div>
